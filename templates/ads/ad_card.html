{% extends 'base.html' %}

{% load crispy_forms_tags %}
{% load crispy_forms_field %}

{% block content %}
    <div class="container-fluid col-md-10 ms-2">
        <div class="card">
            <div class="d-flex card-header text-bg-info bg-opacity-10">
                <h6 class="h6"> {{ ad.title }} </h6>
                <div class="ms-auto">                    
                        <p>
                            <span class="fw-bold">–ö–∞—Ç–µ–≥–æ—Ä–∏—è</span>
                            <span class="fst-italic ">{{ ad.get_category_display }}</span>
                        </p>
                        <p>
                            <span class="fw-bold">–û–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–æ</span>
                            <span class="fst-italic "> {{ ad.created_at|date:"d.m.Y" }} </span>
                        </p>
                </div>
            </div>
    
        <!-- –°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–π –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π –≤ django —Ç–µ–≥ safe, –ø–æ–∑–≤–æ–ª—è—é—â–∏–π –Ω–µ
        —ç–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞—Ç—å html-–∫–æ–¥, –≥–µ–Ω–µ—Ä–∏—Ä—É–µ–º—ã–π –≤ ck_editor -->
            <div >{{ ad.content|safe }}</div>
        </div>
        
        <!-- –ë–õ–û–ö –†–ê–ë–û–¢–´ –° –û–¢–ö–õ–ò–ö–ê–ú–ò –ò–õ–ò –†–ï–î–ê–ö–¢–ò–†–û–í–ê–ù–ò–Ø –û–ë–™–Ø–í–õ–ï–ù–ò–Ø  -->
        {% if user.is_authenticated %} <!-- —ç—Ç–æ –≥–ª–∞–≤–Ω–æ–µ —É—Å–ª–æ–≤–∏–µ -->
            {% if ad.author == user %} <!-- –µ—Å–ª–∏ —ç—Ç–æ –æ–±—ä—è–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è -->
                <a href="{{ ad.pk }}/edit" class="btn btn-secondary">–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å</a>
            
            <!-- –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —É—Å–ª–æ–≤–∏–π –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ —Ñ–æ—Ä–º—ã –æ—Ç–∫–ª–∏–∫–∞-->
            {% else%}
                {% if response %} <!-- –µ—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —É–∂–µ –æ—Å—Ç–∞–≤–∏–ª –æ—Ç–∫–ª–∏–∫ -->
                    {% if response.is_accepted %}
                        <label class="form-label text-bg-success">–í–∞—à –æ—Ç–∫–ª–∏–∫ –æ–¥–æ–±—Ä–µ–Ω</label>
                    {% else %}
                        <label class="form-label text-bg-info">–í—ã —É–∂–µ –æ—Å—Ç–∞–≤–∏–ª–∏ –æ—Ç–∫–ª–∏–∫</label>
                    {% endif %}
                {% else %}
                    <a href="{% url 'response_create' ad_id=ad.id %}" class="btn btn-outline-primary">–û—Å—Ç–∞–≤–∏—Ç—å –æ—Ç–∫–ª–∏–∫ </a>
                {% endif %}
            {% endif %}
            
            <!-- –£—Å–ª–æ–≤–∏–µ –æ—Ç–∫—Ä—ã—Ç–∏—è —Ñ–æ—Ä–º—ã –æ—Ç–ø—Ä–∞–≤–∫–∏ –æ—Ç–∫–ª–∏–∫–∞ -->
            {% if response_create %}
                <form action="" method="post" class="ms-2 mt-3">
                    {% csrf_token %}
                    {{ form | crispy }}
                    <input type="submit" value="–û—Ç–ø—Ä–∞–≤–∏—Ç—å üîâ" class="mt-2 btn btn-outline-dark">
                </form>
            {% endif %}
        {% endif %}
    </div>

{% endblock content %}